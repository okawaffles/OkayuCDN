function sendFiles(e){$("p.upload_error").css("display","none"),resetProgressBar();var s=new XMLHttpRequest;s.upload.addEventListener("progress",updateProgress),s.open("POST","/api/quickUpload");for(var o=new FormData,l=0;l<e.length;l++)if(navigator.userAgent.includes("Android")){let s=e[l].name.split(".");s.length;o.append("file"+l,e[l],e[l].name),endFileName=e[l].name}else o.append("file"+l,e[l],e[l].name),endFileName=e[l].name;s.send(o)}function checkResult(){$.getJSON("/api/getres?user=anonymous&service=qus",function(e){let s=e.success;s?(progress.innerHTML="<br><p>Finished, please wait...</p>",console.log(`ok: ${e.toString()}`),endFileName=e.id,document.location=`/success?f=${endFileName}&anon=true`):"SCH-RNF"!=e.code?($("p.upload_error").html(`An error has occurred while uploading.\nDetails: ${e.details} (${e.code})`),$("p.upload_error").css("color","red"),$("#visibleToggle").css("display","none"),console.log(`error: ${e.code}`)):setTimeout(()=>{checkResult()},2500)})}function updateProgress(e){if(console.log(e.loaded/e.total*100+"%"),progress.style.width=e.loaded/e.total*100+"%","100%"==progress.style.width){$("#visibleToggle").css("display","inline"),$("p.upload_error").html("Please wait a moment..."),$("p.upload_error").css("color","white"),$("p.upload_error").css("display","inline");setTimeout(()=>{checkResult()},2500)}}function resetProgressBar(){progress.innerHTML="",progress.style.width="0%"}function addProgressBar(){var e=document.createElement("div");e.className="progressBar",progressUpload.appendChild(e);var s=document.createElement("div");s.className="up_progress",e.appendChild(s),progress=document.getElementsByClassName("up_progress")[0]}function setup(e){document.getElementById("visibleToggle").style="display: none",domain=e,document.getElementById("hider").style="",document.getElementById("storageAmount").style=""}var progress,endFileName,browse=document.getElementsByClassName("chooseFiles")[0],selectDialog=document.getElementById("uploaded"),progressUpload=document.getElementById("progressUpload");addProgressBar(),browse.addEventListener("click",function(){selectDialog.click()});try{document.getElementById("uploadBtn").onclick=function(){sendFiles(selectDialog.files)}}catch(e){alert("Error in quickupload.js"),console.log(e)}console.log("loaded quickupload.js");