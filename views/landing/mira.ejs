<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>okayu pointer landing</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/5.1.3/pixi.min.js"></script>
    <style type="text/css">
        body {
            margin: 0;
            overflow: hidden;
        }
    </style>
</head>

<body>
    <script>
        let zoom = (( window.outerWidth - 10 ) / window.innerWidth).toFixed(2);
        let runPixi = true;
        console.log(zoom);

        // prevent tacobelle03 from getting around my check by 100%ing, then zooming after load >:3
        // jk, reloads the sketch so it looks normal after zooming on respectable browsers such as firefox
        $(window).resize(function() { 
            document.location = '/mira';
        });

        let fs = 120;
        let mX = 0;
        let mY = 0;
        let swid = screen.width;
        let shei = screen.height;
        if (swid < 1280) {
            fs = 60; 
            okayuScale = 1.3;
        }
        let app = new PIXI.Application({ width: swid, height: shei });
        app.stage.interactive = true;
        document.body.appendChild(app.view);
        let bgi = PIXI.Sprite.from('/assets/images/landing/bgi.png');
        let mira = PIXI.Sprite.from('/assets/images/landing/mira_new.png');
        bgi.scale.set(1.1, 1.1);
        bgi.anchor.set(0.5);
        app.stage.addChild(bgi);
        miraScale = 1.5 * (shei/1080);
        mira.x = (swid / 2) - ((853 * miraScale) / 2);
        mira.y = shei - (450 * miraScale);
        mira.scale.set(miraScale, miraScale);
        app.stage.addChild(mira);

        let title = new PIXI.Text(`goldenmira`, { fontFamily: "Courier New", fontSize: fs, align: 'center', fill: "#222742", stroke: "#222742", strokeThickness:10 });
        title.x = swid / 2 - (title.width / 2);
        title.y = 200;
        app.stage.addChild(title);

        let elapsed = 0.0;
        app.ticker.add((delta) => {
            elapsed += delta;
            mira.y = (shei - (440 * miraScale)) + Math.cos(elapsed / 50.0) * 10.0;
            mira.x = (swid / 2) - ((853 * miraScale) / 2) - (mX / 165) + swid / 125;
            title.y = 200 + -Math.cos(elapsed / 50.0) * 10.0;
            title.x = swid / 2 - (title.width / 2) - (mX / 125) + swid / 125;

            bgi.x = swid / 2 - (mX / 75) + swid / 125;
            bgi.y = shei / 2 - (mY / 75) + shei / 125;
        });

        function updMXY(e) {
            let pos = e.data.global;
            mX = pos.x;
            mY = pos.y;
        }

        app.stage.on("pointermove", updMXY);
    </script>
</body>

</html>